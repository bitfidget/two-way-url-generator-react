{"ast":null,"code":"import _defineProperty from \"/Users/smallmighty/Projects/Westpac/two-way-url-generator-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/smallmighty/Projects/Westpac/two-way-url-generator-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/smallmighty/Projects/Westpac/two-way-url-generator-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/smallmighty/Projects/Westpac/two-way-url-generator-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/smallmighty/Projects/Westpac/two-way-url-generator-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/smallmighty/Projects/Westpac/two-way-url-generator-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/smallmighty/Projects/Westpac/two-way-url-generator-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/smallmighty/Projects/Westpac/two-way-url-generator-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/smallmighty/Projects/Westpac/two-way-url-generator-react/src/App.js\";\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { DragDropContext } from 'react-beautiful-dnd';\nimport './style/gui.css'; // Components\n\nimport ControlledRow from 'components/ControlledRow';\nimport DragDropSection from 'components/DragDropSection';\nimport DragDropColumn from 'components/DragDropColumn';\nimport SummaryItem from 'components/SummaryItem'; // functions\n\nimport HashString from 'functions/HashString';\nimport UrlParamaters from 'functions/UrlParamaters'; // feeds\n\nimport snippetsStructured from 'feed/snippetsStructured';\nimport summariesStructured from 'feed/summariesStructured';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.componentDidMount = function () {\n      // to cut out some weird mutable data issues - clone the original data\n      _this.snippetsMaster = JSON.parse(JSON.stringify(snippetsStructured));\n      _this.summariesMaster = JSON.parse(JSON.stringify(summariesStructured));\n    };\n\n    _this.onClearUrl = function (e) {\n      _this.setState({\n        inputUrl: ''\n      });\n    };\n\n    _this.onEncodeUrl = function (e) {\n      var codedSummary = HashString.encode('first');\n      var codedItems = HashString.encode(_this.state.snippets.columns.col1.itemIds);\n      var codedUrl = UrlParamaters.stringify({\n        summary: codedSummary,\n        items: codedItems\n      });\n      UrlParamaters.objectify(codedUrl);\n      alert(codedUrl);\n    };\n\n    _this.onDecodeUrl = function (e) {\n      var retreivedItemsList, retreivedItemsIds; // retreive items from the URL\n\n      if (_this.state.inputUrl) {\n        retreivedItemsList = UrlParamaters.objectify(_this.state.inputUrl).items || '';\n        retreivedItemsIds = HashString.decode(retreivedItemsList).split(',');\n      } else {\n        console.log('ERROR in URL');\n        return;\n      } // TODO:\n      // 1. MUCH BETTER ERROR HANDLING FOR INPUT URLS\n      // 2. ACTUAL URL READER\n      // 3. SUMMARY CHOOSER AND DECODER\n      // reset so all data is back to first state\n\n\n      var snippets = JSON.parse(JSON.stringify(_this.snippetsMaster));\n      var availableItemsIds = Array.from(snippets.columns.col2.itemIds);\n      var selectedItemsIds = [];\n      retreivedItemsIds.map(function (item, index) {\n        // build selectedIds\n        selectedItemsIds.push(item); // remove from available Ids\n\n        availableItemsIds.splice(availableItemsIds.indexOf(item), 1);\n      });\n      snippets.columns.col1.itemIds = selectedItemsIds;\n      snippets.columns.col2.itemIds = availableItemsIds;\n\n      _this.setState({\n        snippets: snippets\n      });\n    };\n\n    _this.onInputUrl = function (e) {\n      _this.setState({\n        inputUrl: e.target.value\n      });\n    };\n\n    _this.onReset = function (e) {\n      console.log('THE WORLD EXPLODED');\n\n      _this.setState({\n        snippets: JSON.parse(JSON.stringify(_this.snippetsMaster))\n      });\n    };\n\n    _this.onCreateNew = function (e) {};\n\n    _this.onDragEnd = function (result) {\n      var _objectSpread3;\n\n      var destination = result.destination,\n          source = result.source,\n          draggableId = result.draggableId; // if no destination, do nothing\n\n      if (!destination) {\n        return;\n      } // if no change, do nothing\n\n\n      if (destination.droppableId === source.droppableId && destination.index === source.index) {\n        return;\n      }\n\n      var start = _this.state.snippets.columns[source.droppableId];\n      var finish = _this.state.snippets.columns[destination.droppableId]; // moving within same column\n\n      if (start === finish) {\n        var newItemIds = Array.from(start.itemIds);\n        newItemIds.splice(source.index, 1);\n        newItemIds.splice(destination.index, 0, draggableId);\n\n        var newColumn = _objectSpread({}, start, {\n          itemIds: newItemIds\n        });\n\n        var _newSnippets = _objectSpread({}, _this.state.snippets, {\n          columns: _objectSpread({}, _this.state.snippets.columns, _defineProperty({}, newColumn.id, newColumn))\n        });\n\n        _this.setState({\n          snippets: _newSnippets\n        });\n\n        return;\n      } // moving to another column\n\n\n      var startItemIds = Array.from(start.itemIds);\n      startItemIds.splice(source.index, 1);\n\n      var newStart = _objectSpread({}, start, {\n        itemIds: startItemIds\n      });\n\n      var finishItemIds = Array.from(finish.itemIds);\n      finishItemIds.splice(destination.index, 0, draggableId);\n\n      var newFinish = _objectSpread({}, finish, {\n        itemIds: finishItemIds\n      });\n\n      var newSnippets = _objectSpread({}, _this.state.snippets, {\n        columns: _objectSpread({}, _this.state.snippets.columns, (_objectSpread3 = {}, _defineProperty(_objectSpread3, newStart.id, newStart), _defineProperty(_objectSpread3, newFinish.id, newFinish), _objectSpread3))\n      });\n\n      _this.setState({\n        snippets: newSnippets\n      });\n    };\n\n    _this.onCreateNew = function (e) {\n      _this.scrollToRef(_this.summaryRef);\n    };\n\n    _this.scrollToRef = function (elem) {\n      window.scrollTo({\n        top: elem.current.offsetTop,\n        behavior: 'smooth'\n      });\n    };\n\n    _this.onSummaryClick = function (e) {\n      e.preventDefault();\n\n      var summaries = _objectSpread({}, _this.state.summaries, {\n        selectedItemId: _this.state.summaries.selectedItemId === e.currentTarget.id ? '' : e.currentTarget.id\n      });\n\n      debugger;\n\n      _this.setState({\n        summaries: summaries\n      });\n    };\n\n    _this.state = {\n      snippets: snippetsStructured,\n      summaries: summariesStructured,\n      inputUrl: '' // main actions\n\n    };\n    _this.onDragEnd = _this.onDragEnd.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onEncodeUrl = _this.onEncodeUrl.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onDecodeUrl = _this.onDecodeUrl.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onClearUrl = _this.onClearUrl.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onReset = _this.onReset.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onCreateNew = _this.onCreateNew.bind(_assertThisInitialized(_assertThisInitialized(_this))); // summary actions\n\n    _this.onSummaryClick = _this.onSummaryClick.bind(_assertThisInitialized(_assertThisInitialized(_this))); // scrolling and refs\n\n    _this.scrollToRef = _this.scrollToRef.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.welcomeRef = React.createRef();\n    _this.summaryRef = React.createRef();\n    _this.snippetRef = React.createRef();\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"App-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, \"CAI URL / Brief Generator\"), React.createElement(\"main\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        ref: this.welcomeRef,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-8 col-md-offset-2 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, \"Welcome to CAI the brief generator\"), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.onCreateNew,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"Create a new brief\"), React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"or\"), React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.onInputUrl,\n        value: this.state.inputUrl,\n        placeholder: \"Paste in exisitng URL\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.onDecodeUrl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, \"Unscramble this URL\"), React.createElement(\"button\", {\n        onClick: this.onClearUrl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, \"Clear\"), React.createElement(\"button\", {\n        onClick: this.onEncodeUrl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, \"Done, create my URL\"), React.createElement(\"button\", {\n        onClick: this.onReset,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, \" Reset \"))), React.createElement(\"div\", {\n        className: \"row\",\n        ref: this.summaryRef,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-8 col-md-offset-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, \"1. Select the summary you are creating for\"), this.state.summaries.columns.col2.itemIds.map(function (item) {\n        return React.createElement(SummaryItem, {\n          key: item.id,\n          item: _this2.state.summaries.items[item],\n          onSummaryClick: _this2.onSummaryClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 270\n          },\n          __self: this\n        });\n      }))), React.createElement(\"div\", {\n        className: \"row\",\n        ref: this.snippetRef,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-8 col-md-offset-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, \"2. Select and order the required snippets\"), React.createElement(DragDropContext, {\n        onDragEnd: this.onDragEnd,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, this.state.snippets.columnOrder.map(function (columnId) {\n        var column = _this2.state.snippets.columns[columnId];\n        var items = column.itemIds.map(function (itemId) {\n          return _this2.state.snippets.items[itemId];\n        });\n        return React.createElement(DragDropColumn, {\n          key: column.id,\n          column: column,\n          items: items,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299\n          },\n          __self: this\n        });\n      }))))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/smallmighty/Projects/Westpac/two-way-url-generator-react/src/App.js"],"names":["React","Component","ReactDOM","DragDropContext","ControlledRow","DragDropSection","DragDropColumn","SummaryItem","HashString","UrlParamaters","snippetsStructured","summariesStructured","App","props","componentDidMount","snippetsMaster","JSON","parse","stringify","summariesMaster","onClearUrl","e","setState","inputUrl","onEncodeUrl","codedSummary","encode","codedItems","state","snippets","columns","col1","itemIds","codedUrl","summary","items","objectify","alert","onDecodeUrl","retreivedItemsList","retreivedItemsIds","decode","split","console","log","availableItemsIds","Array","from","col2","selectedItemsIds","map","item","index","push","splice","indexOf","onInputUrl","target","value","onReset","onCreateNew","onDragEnd","result","destination","source","draggableId","droppableId","start","finish","newItemIds","newColumn","newSnippets","id","startItemIds","newStart","finishItemIds","newFinish","scrollToRef","summaryRef","elem","window","scrollTo","top","current","offsetTop","behavior","onSummaryClick","preventDefault","summaries","selectedItemId","currentTarget","bind","welcomeRef","createRef","snippetRef","columnOrder","columnId","column","itemId"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport ReactDOM from 'react-dom'\nimport { DragDropContext } from 'react-beautiful-dnd'\nimport './style/gui.css'\n\n// Components\nimport ControlledRow from 'components/ControlledRow'\nimport DragDropSection from 'components/DragDropSection'\nimport DragDropColumn from 'components/DragDropColumn'\nimport SummaryItem from 'components/SummaryItem'\n\n// functions\nimport HashString from 'functions/HashString'\nimport UrlParamaters from 'functions/UrlParamaters'\n\n// feeds\nimport snippetsStructured from 'feed/snippetsStructured'\nimport summariesStructured from 'feed/summariesStructured'\n\nclass App extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            snippets: snippetsStructured,\n            summaries: summariesStructured,\n            inputUrl: '',\n        }\n\n        // main actions\n        this.onDragEnd = this.onDragEnd.bind(this)\n        this.onEncodeUrl = this.onEncodeUrl.bind(this)\n        this.onDecodeUrl = this.onDecodeUrl.bind(this)\n        this.onClearUrl = this.onClearUrl.bind(this)\n        this.onReset = this.onReset.bind(this)\n        this.onCreateNew = this.onCreateNew.bind(this)\n\n        // summary actions\n        this.onSummaryClick = this.onSummaryClick.bind(this)\n\n        // scrolling and refs\n        this.scrollToRef = this.scrollToRef.bind(this)\n        this.welcomeRef = React.createRef()\n        this.summaryRef = React.createRef()\n        this.snippetRef = React.createRef()\n    }\n\n    componentDidMount = () => {\n        // to cut out some weird mutable data issues - clone the original data\n        this.snippetsMaster = JSON.parse(JSON.stringify(snippetsStructured))\n        this.summariesMaster = JSON.parse(JSON.stringify(summariesStructured))\n    }\n\n    onClearUrl = e => {\n        this.setState({\n            inputUrl: '',\n        })\n    }\n\n    onEncodeUrl = e => {\n        const codedSummary = HashString.encode('first')\n        const codedItems = HashString.encode(\n            this.state.snippets.columns.col1.itemIds\n        )\n        const codedUrl = UrlParamaters.stringify({\n            summary: codedSummary,\n            items: codedItems,\n        })\n\n        UrlParamaters.objectify(codedUrl)\n        alert(codedUrl)\n    }\n\n    // example url to test with ?summary=Zmlyc3Q=&items=c25pcDMsc25pcDE=\n\n    onDecodeUrl = e => {\n        let retreivedItemsList, retreivedItemsIds\n\n        // retreive items from the URL\n        if (this.state.inputUrl) {\n            retreivedItemsList =\n                UrlParamaters.objectify(this.state.inputUrl).items || ''\n            retreivedItemsIds = HashString.decode(retreivedItemsList).split(',')\n        } else {\n            console.log('ERROR in URL')\n            return\n        }\n\n        // TODO:\n        // 1. MUCH BETTER ERROR HANDLING FOR INPUT URLS\n        // 2. ACTUAL URL READER\n        // 3. SUMMARY CHOOSER AND DECODER\n\n        // reset so all data is back to first state\n        let snippets = JSON.parse(JSON.stringify(this.snippetsMaster))\n\n        let availableItemsIds = Array.from(snippets.columns.col2.itemIds)\n        let selectedItemsIds = []\n\n        retreivedItemsIds.map((item, index) => {\n            // build selectedIds\n            selectedItemsIds.push(item)\n            // remove from available Ids\n            availableItemsIds.splice(availableItemsIds.indexOf(item), 1)\n        })\n\n        snippets.columns.col1.itemIds = selectedItemsIds\n        snippets.columns.col2.itemIds = availableItemsIds\n\n        this.setState({\n            snippets: snippets,\n        })\n    }\n\n    onInputUrl = e => {\n        this.setState({\n            inputUrl: e.target.value,\n        })\n    }\n\n    onReset = e => {\n        console.log('THE WORLD EXPLODED')\n        this.setState({\n            snippets: JSON.parse(JSON.stringify(this.snippetsMaster)),\n        })\n    }\n\n    onCreateNew = e => {}\n\n    onDragEnd = result => {\n        const { destination, source, draggableId } = result\n\n        // if no destination, do nothing\n        if (!destination) {\n            return\n        }\n\n        // if no change, do nothing\n        if (\n            destination.droppableId === source.droppableId &&\n            destination.index === source.index\n        ) {\n            return\n        }\n\n        const start = this.state.snippets.columns[source.droppableId]\n        const finish = this.state.snippets.columns[destination.droppableId]\n\n        // moving within same column\n        if (start === finish) {\n            const newItemIds = Array.from(start.itemIds)\n            newItemIds.splice(source.index, 1)\n            newItemIds.splice(destination.index, 0, draggableId)\n\n            const newColumn = {\n                ...start,\n                itemIds: newItemIds,\n            }\n\n            const newSnippets = {\n                ...this.state.snippets,\n                columns: {\n                    ...this.state.snippets.columns,\n                    [newColumn.id]: newColumn,\n                },\n            }\n\n            this.setState({\n                snippets: newSnippets,\n            })\n            return\n        }\n\n        // moving to another column\n        const startItemIds = Array.from(start.itemIds)\n        startItemIds.splice(source.index, 1)\n        const newStart = {\n            ...start,\n            itemIds: startItemIds,\n        }\n\n        const finishItemIds = Array.from(finish.itemIds)\n        finishItemIds.splice(destination.index, 0, draggableId)\n        const newFinish = {\n            ...finish,\n            itemIds: finishItemIds,\n        }\n\n        const newSnippets = {\n            ...this.state.snippets,\n            columns: {\n                ...this.state.snippets.columns,\n                [newStart.id]: newStart,\n                [newFinish.id]: newFinish,\n            },\n        }\n\n        this.setState({\n            snippets: newSnippets,\n        })\n    }\n\n    onCreateNew = e => {\n        this.scrollToRef(this.summaryRef)\n    }\n\n    scrollToRef = elem => {\n        window.scrollTo({\n            top: elem.current.offsetTop,\n            behavior: 'smooth',\n        })\n    }\n\n    onSummaryClick = e => {\n        e.preventDefault()\n        const summaries = {\n            ...this.state.summaries,\n            selectedItemId:\n                this.state.summaries.selectedItemId === e.currentTarget.id\n                    ? ''\n                    : e.currentTarget.id,\n        }\n\n        debugger\n        this.setState({\n            summaries: summaries,\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"App\">\n                <header className=\"App-header\">\n                    CAI URL / Brief Generator\n                </header>\n                <main>\n                    <div className=\"row\" ref={this.welcomeRef}>\n                        <div className=\"col-md-8 col-md-offset-2 text-center\">\n                            <h1>Welcome to CAI the brief generator</h1>\n                            <h3 />\n                            <button onClick={this.onCreateNew}>\n                                Create a new brief\n                            </button>\n                            <h3>or</h3>\n                            <input\n                                type=\"text\"\n                                onChange={this.onInputUrl}\n                                value={this.state.inputUrl}\n                                placeholder=\"Paste in exisitng URL\"\n                            />\n                            <button onClick={this.onDecodeUrl}>\n                                Unscramble this URL\n                            </button>\n                            <button onClick={this.onClearUrl}>Clear</button>\n\n                            <button onClick={this.onEncodeUrl}>\n                                Done, create my URL\n                            </button>\n\n                            <button onClick={this.onReset}> Reset </button>\n                        </div>\n                    </div>\n\n                    <div className=\"row\" ref={this.summaryRef}>\n                        <div className=\"col-md-8 col-md-offset-2\">\n                            <h2>1. Select the summary you are creating for</h2>\n                            {this.state.summaries.columns.col2.itemIds.map(\n                                item => {\n                                    return (\n                                        <SummaryItem\n                                            key={item.id}\n                                            item={\n                                                this.state.summaries.items[item]\n                                            }\n                                            onSummaryClick={this.onSummaryClick}\n                                        />\n                                    )\n                                }\n                            )}\n                        </div>\n                    </div>\n\n                    <div className=\"row\" ref={this.snippetRef}>\n                        <div className=\"col-md-8 col-md-offset-2\">\n                            <h2>2. Select and order the required snippets</h2>\n                            <DragDropContext onDragEnd={this.onDragEnd}>\n                                {this.state.snippets.columnOrder.map(\n                                    columnId => {\n                                        const column = this.state.snippets\n                                            .columns[columnId]\n                                        const items = column.itemIds.map(\n                                            itemId =>\n                                                this.state.snippets.items[\n                                                    itemId\n                                                ]\n                                        )\n\n                                        return (\n                                            <DragDropColumn\n                                                key={column.id}\n                                                column={column}\n                                                items={items}\n                                            />\n                                        )\n                                    }\n                                )}\n                            </DragDropContext>\n                        </div>\n                    </div>\n                </main>\n            </div>\n        )\n    }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}